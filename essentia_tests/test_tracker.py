import os

'''
import essentia
import essentia.standard


#print dir(essentia.standard)

help(essentia.standard.BeatTrackerMultiFeature)



essentia.standard.BeatTrackerMultiFeature('RedHotChiliPeppers-DaniCalifornia.mp3')
'''

import subprocess

'''
bashCommand = ["essentia_bin/streaming_beattracker_multifeature_mirex2013", "3_Doors_Down_-_Kryptonite.wav",  "tmp.txt"]
subprocess.call(bashCommand)

f = open('tmp.txt', 'r')
data = f.read()
print data.split('\n')
'''

import os
for file in os.listdir("./"):
    if file.endswith(".mp3"):
        #print(os.path.join("/mydir", file))

        filename = os.path.splitext(file)[0]
        filename = "./downbeats/" + filename  + '.txt'
        bashCommand = ["GMMPatternTracker", "single", file]
        #subprocess.call(bashCommand)
    	print filename
        with open(filename, "w") as outfile:
    		subprocess.call(bashCommand, stdout=outfile)


'''
import sched
import time


f = open('tmp.txt', 'r')
data = f.read()

scheduler = sched.scheduler(time.time, time.sleep)

def print_event(name):
    print 'EVENT:', time.time(), name

print 'START:', time.time()

times = data.split('\n')
times.pop(-1)

for time_ in times:

	scheduler.enter(float(time_.strip()), 1, print_event, ('first',))

scheduler.run()

'''



['0.626939', '1.26549', '1.90404', '2.54258', '3.18113', '3.81968', '4.45823', '5.09678', '5.71211', '6.32744', '6.93116', '7.54648', '8.1502', '8.75392', '9.36925', '9.98458', '10.5999', '11.2036', '11.8073', '12.4111', '13.0148', '13.6301', '14.2338', '14.8376', '15.4413', '16.045', '16.6487', '17.2524', '17.8561', '18.4599', '19.0636', '19.6673', '20.2826', '20.898', '21.5017', '22.1054', '22.6975', '23.2896', '23.9049', '24.5203', '25.124', '25.7277', '26.3314', '26.9351', '27.5389', '28.1426', '28.7463', '29.3616', '29.977', '30.5807', '31.1844', '31.7997', '32.4267', '33.0188', '33.6225', '34.2262', '34.8299', '35.4337', '36.0374', '36.6411', '37.2448', '37.8485', '38.4522', '39.0676', '39.6713', '40.2866', '40.8903', '41.5057', '42.121', '42.7247', '43.3284', '43.9322', '44.5359', '45.1396', '45.7549', '46.3702', '46.974', '47.5777', '48.1814', '48.7851', '49.3888', '49.9926', '50.5963', '51.2', '51.7921', '52.4074', '53.0112', '53.6265', '54.2418', '54.8455', '55.4492', '56.053', '56.6567', '57.2604', '57.8641', '58.4795', '59.0948', '59.7101', '60.3254', '60.9292', '61.5329', '62.1366', '62.7403', '63.344', '63.9478', '64.5399', '65.1436', '65.7589', '66.3626', '66.9547', '67.5585', '68.1738', '68.7775', '69.3812', '69.9849', '70.6003', '71.1924', '71.7961', '72.3998', '73.0151', '73.6305', '74.2342', '74.8379', '75.4416', '76.0686', '76.6723', '77.276', '77.8913', '78.5067', '79.1104', '79.7141', '80.3178', '80.9215', '81.5253', '82.1058', '82.7095', '83.3248', '83.9401', '84.5439', '85.1244', '85.7281', '86.3318', '86.9471', '87.5508', '88.1546', '88.7699', '89.3736', '89.9773', '90.581', '91.1964', '91.8117', '92.427', '93.0424', '93.6461', '94.2498', '94.8535', '95.4572', '96.061', '96.6763', '97.28', '97.8953', '98.499', '99.1028', '99.7065', '100.31', '100.914', '101.506', '102.11', '102.725', '103.34', '103.956', '104.559', '105.163', '105.779', '106.394', '106.998', '107.601', '108.193', '108.809', '109.412', '110.016', '110.62', '111.224', '111.827', '112.431', '113.035', '113.638', '114.242', '114.846', '115.45', '116.065', '116.657', '117.261', '117.864', '118.48', '119.084', '119.687', '120.303', '120.918', '121.533', '122.125', '122.717', '123.321', '123.937', '124.552', '125.156', '125.759', '126.363', '126.967', '127.57', '128.174', '128.778', '129.382', '129.997', '130.601', '131.216', '131.82', '132.423', '133.027', '133.631', '134.235', '134.838', '135.454', '136.046', '136.649', '137.276', '137.892', '138.484', '139.088', '139.691', '140.295', '140.899', '141.502', '142.106', '142.71', '143.314', '143.917', '144.521', '145.136', '145.752', '146.355', '146.971', '147.586', '148.19', '148.793', '149.397', '150.001', '150.605', '151.208', '151.812', '152.416', '153.02', '153.635', '154.25', '154.854', '155.458', '156.061', '156.665', '157.269', '157.872', '158.488', '159.103', '159.718', '160.334', '160.938', '161.541', '162.133', '162.725', '163.329', '163.933', '164.537', '165.152', '165.767', '166.383', '166.986', '167.59', '168.182', '168.786', '169.39', '169.993', '170.597', '171.201', '171.804', '172.408', '173.023', '173.639', '174.243', '174.846', '175.45', '176.054', '176.657', '177.261', '177.865', '178.469', '179.072', '179.676', '180.28', '180.883', '181.487', '182.091', '182.695', '183.298', '183.914', '184.529', '185.133', '185.748', '186.363', '186.967', '187.582', '188.198', '188.801', '189.405', '190.009', '190.613', '191.216', '191.82', '192.447', '193.051', '193.654', '194.258', '194.862', '195.477', '196.093', '196.696', '197.3', '197.904', '198.507', '199.111', '199.715', '200.319', '200.911', '201.503', '202.13', '202.733', '203.337', '203.941', '204.545', '205.148', '205.764', '206.379', '206.983', '207.598', '208.213', '208.829', '209.444', '210.048', '210.651', '211.255', '211.847', '212.439', '213.043', '213.647', '214.262', '214.877', '215.481', '216.085', '216.689', '217.281', '217.896', '218.5', '219.115', '219.73', '220.323', '220.915', '221.518', '222.122', '222.749', '223.353', '223.968', '224.583', '225.187', '225.791', '226.383', '226.975', '227.579', '228.182', '228.786', '229.413', '230.04', '230.667', '231.282', '231.898', '232.513', '233.128', '233.79', '234.44', '235.079', '235.729', '236.379', '237.029', '237.679', '238.33', '238.991', '239.642', '']
['0.626939', '1.26549', '1.90404', '2.54258', '3.18113', '3.81968', '4.45823', '5.09678', '5.71211', '6.32744', '6.93116', '7.54648', '8.1502', '8.75392', '9.36925', '9.98458', '10.5999', '11.2036', '11.8073', '12.4111', '13.0148', '13.6301', '14.2338', '14.8376', '15.4413', '16.045', '16.6487', '17.2524', '17.8561', '18.4599', '19.0636', '19.6673', '20.2826', '20.898', '21.5017', '22.1054', '22.6975', '23.2896', '23.9049', '24.5203', '25.124', '25.7277', '26.3314', '26.9351', '27.5389', '28.1426', '28.7463', '29.3616', '29.977', '30.5807', '31.1844', '31.7997', '32.4267', '33.0188', '33.6225', '34.2262', '34.8299', '35.4337', '36.0374', '36.6411', '37.2448', '37.8485', '38.4522', '39.0676', '39.6713', '40.2866', '40.8903', '41.5057', '42.121', '42.7247', '43.3284', '43.9322', '44.5359', '45.1396', '45.7549', '46.3702', '46.974', '47.5777', '48.1814', '48.7851', '49.3888', '49.9926', '50.5963', '51.2', '51.7921', '52.4074', '53.0112', '53.6265', '54.2418', '54.8455', '55.4492', '56.053', '56.6567', '57.2604', '57.8641', '58.4795', '59.0948', '59.7101', '60.3254', '60.9292', '61.5329', '62.1366', '62.7403', '63.344', '63.9478', '64.5399', '65.1436', '65.7589', '66.3626', '66.9547', '67.5585', '68.1738', '68.7775', '69.3812', '69.9849', '70.6003', '71.1924', '71.7961', '72.3998', '73.0151', '73.6305', '74.2342', '74.8379', '75.4416', '76.0686', '76.6723', '77.276', '77.8913', '78.5067', '79.1104', '79.7141', '80.3178', '80.9215', '81.5253', '82.1058', '82.7095', '83.3248', '83.9401', '84.5439', '85.1244', '85.7281', '86.3318', '86.9471', '87.5508', '88.1546', '88.7699', '89.3736', '89.9773', '90.581', '91.1964', '91.8117', '92.427', '93.0424', '93.6461', '94.2498', '94.8535', '95.4572', '96.061', '96.6763', '97.28', '97.8953', '98.499', '99.1028', '99.7065', '100.31', '100.914', '101.506', '102.11', '102.725', '103.34', '103.956', '104.559', '105.163', '105.779', '106.394', '106.998', '107.601', '108.193', '108.809', '109.412', '110.016', '110.62', '111.224', '111.827', '112.431', '113.035', '113.638', '114.242', '114.846', '115.45', '116.065', '116.657', '117.261', '117.864', '118.48', '119.084', '119.687', '120.303', '120.918', '121.533', '122.125', '122.717', '123.321', '123.937', '124.552', '125.156', '125.759', '126.363', '126.967', '127.57', '128.174', '128.778', '129.382', '129.997', '130.601', '131.216', '131.82', '132.423', '133.027', '133.631', '134.235', '134.838', '135.454', '136.046', '136.649', '137.276', '137.892', '138.484', '139.088', '139.691', '140.295', '140.899', '141.502', '142.106', '142.71', '143.314', '143.917', '144.521', '145.136', '145.752', '146.355', '146.971', '147.586', '148.19', '148.793', '149.397', '150.001', '150.605', '151.208', '151.812', '152.416', '153.02', '153.635', '154.25', '154.854', '155.458', '156.061', '156.665', '157.269', '157.872', '158.488', '159.103', '159.718', '160.334', '160.938', '161.541', '162.133', '162.725', '163.329', '163.933', '164.537', '165.152', '165.767', '166.383', '166.986', '167.59', '168.182', '168.786', '169.39', '169.993', '170.597', '171.201', '171.804', '172.408', '173.023', '173.639', '174.243', '174.846', '175.45', '176.054', '176.657', '177.261', '177.865', '178.469', '179.072', '179.676', '180.28', '180.883', '181.487', '182.091', '182.695', '183.298', '183.914', '184.529', '185.133', '185.748', '186.363', '186.967', '187.582', '188.198', '188.801', '189.405', '190.009', '190.613', '191.216', '191.82', '192.447', '193.051', '193.654', '194.258', '194.862', '195.477', '196.093', '196.696', '197.3', '197.904', '198.507', '199.111', '199.715', '200.319', '200.911', '201.503', '202.13', '202.733', '203.337', '203.941', '204.545', '205.148', '205.764', '206.379', '206.983', '207.598', '208.213', '208.829', '209.444', '210.048', '210.651', '211.255', '211.847', '212.439', '213.043', '213.647', '214.262', '214.877', '215.481', '216.085', '216.689', '217.281', '217.896', '218.5', '219.115', '219.73', '220.323', '220.915', '221.518', '222.122', '222.749', '223.353', '223.968', '224.583', '225.187', '225.791', '226.383', '226.975', '227.579', '228.182', '228.786', '229.413', '230.04', '230.667', '231.282', '231.898', '232.513', '233.128', '233.79', '234.44', '235.079', '235.729', '236.379', '237.029', '237.679', '238.33', '238.991', '239.642', '']
